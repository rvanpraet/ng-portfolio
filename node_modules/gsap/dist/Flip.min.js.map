{"version":3,"file":"Flip.min.js","sources":["../src/Flip.js"],"sourcesContent":["/*!\n * EasePack 3.6.0\n * https://greensock.com\n *\n * @license Copyright 2008-2020, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n/* eslint-disable */\n\nlet _id = 1,\n\t_toArray, gsap, _calcGrowthDirection,\n\t_find = context => _toArray(_toArray(context || document.body)[0].querySelectorAll(\"[data-flip-id]\")),\n\t_reserved = {change:1, targets:1, onComplete:1, onUpdate:1, onStart:1, delay:1, scale:1, context:1, swap:1, wait:1, onInit:1, absolute:1, props:1, onEnter:1, onLeave:1, custom:1, paused:1, nested:1},\n\t_copy = obj => {\n\t\tlet result = {}, p;\n\t\tfor (p in obj) {\n\t\t\t_reserved[p] || (result[p] = obj[p]);\n\t\t}\n\t\treturn result;\n\t},\n\t_makeAbsolute = (elements, state, result) => {\n\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\tlet el = elements[i],\n\t\t\t\ts = state[i], b, o,\n\t\t\t\tstyle = el.style;\n\t\t\tel.parentNode || (s.p && s.p.appendChild(el))\n\t\t\tgsap.getProperty(el, \"display\") === \"none\" && (style.display = s.d);\n\t\t\tstyle.position = \"absolute\";\n\t\t\tstyle.width = s.w + \"px\";\n\t\t\tstyle.height = s.h + \"px\";\n\t\t\tstyle.top || (style.top = \"0px\");\n\t\t\tstyle.left || (style.left = \"0px\");\n\t\t\tb = el.getBoundingClientRect();\n\t\t\to = {x: s.l - b.left, y: s.t - b.top};\n\t\t\tgsap.set(el, {x: \"+=\" + o.x, y: \"+=\" + o.y });\n\t\t\tresult && (result[i] = o);\n\t\t}\n\t\treturn result;\n\t},\n\t_getDimensions = el => {\n\t\tlet b = el.getBoundingClientRect(),\n\t\t\tgetProp = gsap.getProperty(el);\n\t\treturn { el: el, d: getProp(\"display\"), p: el.parentNode, sx: getProp(\"scaleX\"), sy: getProp(\"scaleY\"), x: getProp(\"x\"), y: getProp(\"y\"), l: b.left, t: b.top, w: parseFloat(getProp(\"width\", \"px\")), h: parseFloat(getProp(\"height\", \"px\")), bw: b.width, bh: b.height, css: el.style.cssText, o: getProp(\"opacity\"), rx:0, ry:0, origin: getComputedStyle(el).transformOrigin.split(\" \").map(parseFloat) };\n\t},\n\t_populateGrowthRatios = measurements => {\n\t\tlet {w, h, el, l, t, bw, bh} = measurements,\n\t\t\tstyle = el.style,\n\t\t\tstartWidth = style.width,\n\t\t\tstartHeight = style.height,\n\t\t\tb2;\n\t\tstyle.width = (w + 100) + \"px\";\n\t\tstyle.height = (h + 100) + \"px\";\n\t\tb2 = el.getBoundingClientRect();\n\t\tmeasurements.rx = Math.abs((b2.left - l) / (b2.width - bw));\n\t\tmeasurements.ry = Math.abs((b2.top - t) / (b2.height - bh));\n\t\tstartWidth ? (style.width = startWidth) : style.removeProperty(\"width\");\n\t\tstartHeight ? (style.height = startHeight) : style.removeProperty(\"height\");\n\t},\n\t_getNestedOffsets = (el, property, flipTimeline) => {\n\t\tlet value = 0,\n\t\t\tlookup = flipTimeline._flipProps;\n\t\twhile (el) {\n\t\t\tif (el._flip === flipTimeline) {\n\t\t\t\tvalue += lookup[property](el._flipI) - gsap.getProperty(el, property);\n\t\t\t}\n\t\t\tel = el.parentNode;\n\t\t}\n\t\treturn value;\n\t},\n\t_getX = (b, a, scale, offset, nested) => a.x + (b.l - a.l) + (scale ? ((b.bw / a.bw) * a.sx - a.sx) * a.origin[0] : (b.bw - a.bw) * a.rx) + offset - (nested ? _getNestedOffsets(a.p, \"x\", nested) : 0),\n\t_getY = (b, a, scale, offset, nested) => a.y + (b.t - a.t) + (scale ? ((b.bh / a.bh) * a.sy - a.sy) * a.origin[1] : (b.bh - a.bh) * a.ry) + offset - (nested ? _getNestedOffsets(a.p, \"y\", nested) : 0),\n\t_getScaleX = (b, a) => a.sx * (b.bw / a.bw),\n\t_getScaleY = (b, a) => a.sy * (b.bh / a.bh),\n\t// takes an Array of elements that are either transitioning out or in (onEnter/onLeave), removes them from the \"elements\" Array (and corresponding before/after), finds any that were set to display: none and sets them to what they are in the after state, and triggers a callback (if one is provided), passing the transitioning Array as well as a special function that the user can optionally call to make those elements position: absolute while keeping their viewport positions.\n\t_pluckTransitioning = (elements, transitioning, before, after, callback, tl, useBefore) => {\n\t\tif (transitioning.length) {\n\t\t\tlet state = useBefore ? before : after,\n\t\t\t\trecordedStates = [],\n\t\t\t\ti, index, el;\n\t\t\tfor (i = 0; i < transitioning.length; i++) {\n\t\t\t\tel = transitioning[i];\n\t\t\t\tindex = elements.indexOf(el);\n\t\t\t\tuseBefore || (before[index].d === \"none\" && (el.style.display = after[index].d));\n\t\t\t\tif (~index) {\n\t\t\t\t\trecordedStates.push(state[index]);\n\t\t\t\t\telements.splice(index, 1);\n\t\t\t\t\tbefore.splice(index, 1);\n\t\t\t\t\tafter.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\trecordedStates.push(_getDimensions(transitioning[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback && tl.add(callback(transitioning, () => _makeAbsolute(transitioning, recordedStates) || transitioning), 0);\n\t\t}\n\t};\n\nexport class Flip {\n\tconstructor(vars) {\n\t\tlet {onComplete, delay, scale, targets, change, onUpdate, onStart, context, swap, onInit, absolute, props, onEnter, onLeave, custom, paused, wait, nested} = vars,\n\t\t\tself = this,\n\t\t\telements = self.targets = targets ? _toArray(targets) : _find(context),\n\t\t\ttl = self.animation = gsap.timeline({delay, onStart, onUpdate, paused}),\n\t\t\tfade = swap === \"fade\" && [],\n\t\t\tlookup = {},\n\t\t\tcopy = {},\n\t\t\tentering = [],\n\t\t\tp, changeResult, before;\n\t\t_calcGrowthDirection = 0;\n\t\tbefore = elements.map(_getDimensions)\n\t\tprops && (props = props.split(\" \").join(\"\").split(\",\"));\n\t\tself.measured = false;\n\t\tself.vars = vars;\n\t\twait && tl.pause();\n\t\telements.forEach((el, i) => {\n\t\t\tlet id = el.getAttribute(\"data-flip-id\");\n\t\t\tid || el.setAttribute(\"data-flip-id\", (id = \"\" + _id++));\n\t\t\tlookup[id] = before[i];\n\t\t\tfade && (fade[i] = before[i].o);\n\t\t\t(before[i].d === \"none\" || !before[i].p) && entering.push(el);\n\t\t\tif (props) {\n\t\t\t\tlet getProp = gsap.getProperty(el, null, \"native\"),\n\t\t\t\t\tobj = before[i].props = {};\n\t\t\t\ti = props.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tobj[props[i]] = getProp(props[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tel._flip && el._flip.progress(1);\n\t\t\tel._flip = tl;\n\t\t});\n\n\t\tself.getFrom = (target, property) => typeof(copy[property]) === \"function\" && copy[property](elements.indexOf(_toArray(target)[0]));\n\n\t\tself.measure = () => {\n\t\t\tself.measured = true;\n\t\t\tlet swapIn = [],\n\t\t\t\tswapOut = [],\n\t\t\t\tremove = () => swapOut.forEach(el => el.parentNode && el.parentNode.removeChild(el)),\n\t\t\t\toffsets = absolute && [],\n\t\t\t\tremainingProps = copy,\n\t\t\t\tafter, index, id, el, state, all, i, x, y, width, height, scaleX, scaleY, leaving, v;\n\t\t\tif (context || swap) {\n\t\t\t\tall = _find(context);\n\t\t\t\tfor (i = 0; i < all.length; i++) {\n\t\t\t\t\tel = all[i];\n\t\t\t\t\tid = el.getAttribute(\"data-flip-id\");\n\t\t\t\t\tstate = lookup[id];\n\t\t\t\t\tif (!state) {\n\t\t\t\t\t\tentering.push(el);\n\t\t\t\t\t} else if (swap !== false && state.el !== el) { // swap!\n\t\t\t\t\t\telements.push(el);\n\t\t\t\t\t\tbefore.push(state);\n\t\t\t\t\t\tswapIn.push(el);\n\t\t\t\t\t\tswapOut.push(state.el);\n\t\t\t\t\t\tel._flip = tl;\n\t\t\t\t\t\tif (fade) {\n\t\t\t\t\t\t\tfade.push(0);\n\t\t\t\t\t\t\tstate.el.style.opacity = \"0\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tswapOut.length || (fade = false);\n\t\t\tafter = elements.map(_getDimensions);\n\t\t\tfor (p in vars) {\n\t\t\t\t_reserved[p] || (copy[p] = vars[p]);\n\t\t\t}\n\t\t\tprops && props.forEach(p => copy[p] = i => before[i].props[p]);\n\t\t\t_pluckTransitioning(elements, entering, before, after, onEnter, tl);\n\t\t\tif (onLeave) {\n\t\t\t\tleaving = [];\n\t\t\t\ti = elements.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\t(after[i].d === \"none\" || !after[i].p) && leaving.push(elements[i]);\n\t\t\t\t}\n\t\t\t\t_pluckTransitioning(elements, leaving, before, after, onLeave, tl, true);\n\t\t\t}\n\t\t\tif (scale) {\n\t\t\t\tcopy.scaleX = scaleX = i => _getScaleX(before[i], after[i]);\n\t\t\t\tcopy.scaleY = scaleY = i => _getScaleY(before[i], after[i]);\n\t\t\t} else {\n\t\t\t\tabsolute && (offsets = _makeAbsolute(elements, after, []));\n\t\t\t\tscale || after.forEach(_populateGrowthRatios);\n\t\t\t\tcopy.width = width = i => before[i].w;\n\t\t\t\tcopy.height = height = i => before[i].h;\n\t\t\t}\n\t\t\tcopy.x = x = i => _getX(before[i], after[i], scale, absolute ? offsets[i].x : 0, nested && tl);\n\t\t\tcopy.y = y = i => _getY(before[i], after[i], scale, absolute ? offsets[i].y : 0, nested && tl);\n\t\t\tif (nested) {\n\t\t\t\ttl._flipProps = copy;\n\t\t\t\telements.forEach((el, i) => el._flipI = i);\n\t\t\t}\n\t\t\tfade ? (copy.opacity = i => fade[i]) : remove();\n\t\t\ttl.eventCallback(\"onComplete\", () => {\n\t\t\t\telements.forEach((el, i) => {el._gsap.uncache = 1; el.style.cssText = after[i].css;}) || !fade || remove();\n\t\t\t\tonComplete && onComplete.apply(tl, vars.onCompleteParams || []);\n\t\t\t});\n\t\t\tswapOut.forEach((el, i) => {\n\t\t\t\tindex = elements.indexOf(el);\n\t\t\t\tafter[index] = before[index];\n\t\t\t\tbefore[index] = after[elements.indexOf(swapIn[i])];\n\t\t\t\tlet v = {x: x(index), y: y(index)};\n\t\t\t\tif (scale) {\n\t\t\t\t\tv.scaleX = scaleX(index);\n\t\t\t\t\tv.scaleY = scaleY(index);\n\t\t\t\t} else {\n\t\t\t\t\tv.width = width(index);\n\t\t\t\t\tv.height = height(index);\n\t\t\t\t}\n\t\t\t\tgsap.set(el, v);\n\t\t\t\tbefore[index] = after[index];\n\t\t\t});\n\t\t\tonInit && onInit(self);\n\t\t\tif (custom && elements.length) { // bust out the custom properties as their own tweens so they can use different eases, durations, etc.\n\t\t\t\tremainingProps = _copy(copy);\n\t\t\t\tfor (p in custom) {\n\t\t\t\t\tv = _copy(custom[p]);\n\t\t\t\t\tv[p] = copy[p];\n\t\t\t\t\ttl.from(elements, v, 0);\n\t\t\t\t\tdelete remainingProps[p];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn elements.length ? tl.from(elements, remainingProps, 0) : tl;\n\t\t};\n\t\tchangeResult = change(self);\n\t\tchangeResult && changeResult instanceof gsap.core.Animation && tl.add(changeResult, 0);\n\t\twait || self.measured || self.measure();\n\t}\n\n\tstatic fit(fromEl, toEl, vars) {\n\t\tfromEl = _toArray(fromEl)[0];\n\t\tlet v = vars ? _copy(vars) : {},\n\t\t\tbefore = _getDimensions(_toArray(toEl)[0]),\n\t\t\tafter = _getDimensions(fromEl),\n\t\t\t{absolute, scale} = vars || v,\n\t\t\toffsets = absolute && _makeAbsolute([fromEl], [after], [])[0];\n\t\tv.x = _getX(before, after, scale, offsets ? offsets.x : 0);\n\t\tv.y = _getY(before, after, scale, offsets ? offsets.y : 0);\n\t\tif (scale) {\n\t\t\tv.scaleX = _getScaleX(before, after);\n\t\t\tv.scaleY = _getScaleY(before, after);\n\t\t} else {\n\t\t\tv.width = before.w;\n\t\t\tv.height = before.h;\n\t\t}\n\t\treturn v;\n\t}\n\n\tstatic register(core) {\n\t\tgsap = core;\n\t\t_toArray = gsap.utils.toArray;\n\t\tgsap.flip = vars => new Flip(vars);\n\t}\n}\n\n// export const Flip = {\n// \tname: \"flip\",\n// \tregister(gsap) {\n// \t\tlet _id = 1,\n// \t\t\t_toArray = gsap.utils.toArray,\n// \t\t\t_find = context => _toArray(_toArray(context || document.body)[0].querySelectorAll(\"[data-flip-id]\")),\n// \t\t\t_reserved = {change:1, targets:1, onComplete:1, onUpdate:1, onStart:1, delay:1, scale:1, context:1, swap:1, wait:1, onInit:1, absolute:1, props:1, onEnter:1, onLeave:1},\n// \t\t\t_makeAbsolute = (elements, state, result) => {\n// \t\t\t\tfor (let i = 0; i < elements.length; i++) {\n// \t\t\t\t\tlet el = elements[i],\n// \t\t\t\t\t\ts = state[i], b, o,\n// \t\t\t\t\t\tstyle = el.style;\n// \t\t\t\t\tel.parentNode || (s.p && s.p.appendChild(el))\n// \t\t\t\t\tgsap.getProperty(el, \"display\") === \"none\" && (style.display = s.d);\n// \t\t\t\t\tstyle.position = \"absolute\";\n// \t\t\t\t\tstyle.width = s.w + \"px\";\n// \t\t\t\t\tstyle.height = s.h + \"px\";\n// \t\t\t\t\tstyle.top || (style.top = \"0px\");\n// \t\t\t\t\tstyle.left || (style.left = \"0px\");\n// \t\t\t\t\tb = el.getBoundingClientRect();\n// \t\t\t\t\to = {x: s.l - b.left, y: s.t - b.top};\n// \t\t\t\t\tgsap.set(el, {x: \"+=\" + o.x, y: \"+=\" + o.y });\n// \t\t\t\t\tresult && (result[i] = o);\n// \t\t\t\t}\n// \t\t\t\treturn result;\n// \t\t\t},\n// \t\t\t_getDimensions = el => {\n// \t\t\t\tlet b = el.getBoundingClientRect(),\n// \t\t\t\t\tgetProp = gsap.getProperty(el);\n// \t\t\t\treturn { el: el, d: getProp(\"display\"), p: el.parentNode, sx: getProp(\"scaleX\"), sy: getProp(\"scaleY\"), x: getProp(\"x\"), y: getProp(\"y\"), l: b.left, t: b.top, w: parseFloat(getProp(\"width\", \"px\")), h: parseFloat(getProp(\"height\", \"px\")), bw: b.width, bh: b.height, css: el.style.cssText, o: getProp(\"opacity\"), origin: getComputedStyle(el).transformOrigin.split(\" \").map(parseFloat) };\n// \t\t\t},\n// \t\t\t_pluckTransitioning = (elements, transitioning, before, after, callback, tl, useBefore) => {\n// \t\t\t\tif (transitioning.length) {\n// \t\t\t\t\tlet state = useBefore ? before : after,\n// \t\t\t\t\t\trecordedStates = [],\n// \t\t\t\t\t\ti, index, el;\n// \t\t\t\t\tfor (i = 0; i < transitioning.length; i++) {\n// \t\t\t\t\t\tel = transitioning[i];\n// \t\t\t\t\t\tindex = elements.indexOf(el);\n// \t\t\t\t\t\tuseBefore || (before[index].d === \"none\" && (el.style.display = after[index].d));\n// \t\t\t\t\t\tif (~index) {\n// \t\t\t\t\t\t\trecordedStates.push(state[index]);\n// \t\t\t\t\t\t\telements.splice(index, 1);\n// \t\t\t\t\t\t\tbefore.splice(index, 1);\n// \t\t\t\t\t\t\tafter.splice(index, 1);\n// \t\t\t\t\t\t} else {\n// \t\t\t\t\t\t\trecordedStates.push(_getDimensions(transitioning[i]));\n// \t\t\t\t\t\t}\n// \t\t\t\t\t}\n// \t\t\t\t\tcallback && tl.add(callback(transitioning, () => _makeAbsolute(transitioning, recordedStates) || transitioning), 0);\n// \t\t\t\t}\n// \t\t\t};\n// \t\tgsap.flip = vars => {\n// \t\t\t(typeof(vars) !== \"object\" || vars.push) && (vars = {targets: vars});\n// \t\t\tlet {onComplete, delay, scale, targets, change, onUpdate, onStart, context, swap, onInit, absolute, props, onEnter, onLeave} = vars,\n// \t\t\t\telements = targets ? _toArray(targets) : _find(context),\n// \t\t\t\ttl = gsap.timeline({delay, onStart, onUpdate, onComplete}),\n// \t\t\t\tfade = swap === \"fade\" && [],\n// \t\t\t\tlookup = {},\n// \t\t\t\tbefore = elements.map(_getDimensions),\n// \t\t\t\tcopy = {},\n// \t\t\t\tentering = [],\n// \t\t\t\tp, onReady, changeResult;\n// \t\t\tprops && (props = props.split(\" \").join(\"\").split(\",\"));\n// \t\t\telements.forEach((el, i) => {\n// \t\t\t\tlet id = el.getAttribute(\"data-flip-id\");\n// \t\t\t\tid || el.setAttribute(\"data-flip-id\", (id = \"\" + _id++));\n// \t\t\t\tlookup[id] = before[i];\n// \t\t\t\tfade && (fade[i] = before[i].o);\n// \t\t\t\t(before[i].d === \"none\" || !before[i].p) && entering.push(el);\n// \t\t\t\tif (props) {\n// \t\t\t\t\tlet getProp = gsap.getProperty(el, null, \"native\"),\n// \t\t\t\t\t\tobj = before[i].props = {};\n// \t\t\t\t\ti = props.length;\n// \t\t\t\t\twhile (i--) {\n// \t\t\t\t\t\tobj[props[i]] = getProp(props[i]);\n// \t\t\t\t\t}\n// \t\t\t\t}\n// \t\t\t\tel._flip && el._flip.progress(1);\n// \t\t\t\tel._flip = tl;\n// \t\t\t});\n// \t\t\tonReady = () => {\n// \t\t\t\tlet swapIn = [],\n// \t\t\t\t\tswapOut = [],\n// \t\t\t\t\tremove = () => swapOut.forEach(el => el.parentNode && el.parentNode.removeChild(el)),\n// \t\t\t\t\toffsets = absolute && [],\n// \t\t\t\t\tafter, index, id, el, state, all, i, x, y, width, height, scaleX, scaleY, leaving;\n// \t\t\t\tall = _find(context);\n// \t\t\t\tfor (i = 0; i < all.length; i++) {\n// \t\t\t\t\tel = all[i];\n// \t\t\t\t\tid = el.getAttribute(\"data-flip-id\");\n// \t\t\t\t\tstate = lookup[id];\n// \t\t\t\t\tif (!state) {\n// \t\t\t\t\t\tentering.push(el);\n// \t\t\t\t\t} else if (swap !== false && state.el !== el) { // swap!\n// \t\t\t\t\t\telements.push(el);\n// \t\t\t\t\t\tbefore.push(state);\n// \t\t\t\t\t\tswapIn.push(el);\n// \t\t\t\t\t\tswapOut.push(state.el);\n// \t\t\t\t\t\tel._flip = tl;\n// \t\t\t\t\t\tif (fade) {\n// \t\t\t\t\t\t\tfade.push(0);\n// \t\t\t\t\t\t\tstate.el.style.opacity = \"0\";\n// \t\t\t\t\t\t}\n// \t\t\t\t\t}\n// \t\t\t\t}\n// \t\t\t\tswapOut.length || (fade = false);\n// \t\t\t\tafter = elements.map(_getDimensions);\n// \t\t\t\tfor (p in vars) {\n// \t\t\t\t\t_reserved[p] || (copy[p] = vars[p]);\n// \t\t\t\t}\n// \t\t\t\tprops && props.forEach(p => copy[p] = i => before[i].props[p]);\n// \t\t\t\t_pluckTransitioning(elements, entering, before, after, onEnter, tl);\n// \t\t\t\tif (onLeave) {\n// \t\t\t\t\tleaving = [];\n// \t\t\t\t\ti = elements.length;\n// \t\t\t\t\twhile (i--) {\n// \t\t\t\t\t\t(after[i].d === \"none\" || !after[i].p) && leaving.push(elements[i]);\n// \t\t\t\t\t}\n// \t\t\t\t\t_pluckTransitioning(elements, leaving, before, after, onLeave, tl, true);\n// \t\t\t\t}\n// \t\t\t\tif (scale) {\n// \t\t\t\t\tcopy.x = x = i => after[i].x + (before[i].l - after[i].l) + ((before[i].bw / after[i].bw) * after[i].sx - after[i].sx) * after[i].origin[0];\n// \t\t\t\t\tcopy.y = y = i => after[i].y + (before[i].t - after[i].t) + ((before[i].bh / after[i].bh) * after[i].sy - after[i].sy) * after[i].origin[1];\n// \t\t\t\t\tcopy.scaleX = scaleX = i => after[i].sx * (before[i].bw / after[i].bw);\n// \t\t\t\t\tcopy.scaleY = scaleY = i => after[i].sy * (before[i].bh / after[i].bh);\n// \t\t\t\t} else {\n// \t\t\t\t\tabsolute && (offsets = _makeAbsolute(elements, after, []));\n// \t\t\t\t\tcopy.x = x = i => after[i].x + (before[i].l - after[i].l) + (absolute ? offsets[i].x : 0);\n// \t\t\t\t\tcopy.y = y = i => after[i].y + (before[i].t - after[i].t) + (absolute ? offsets[i].y : 0);\n// \t\t\t\t\tcopy.width = width = i => before[i].w;\n// \t\t\t\t\tcopy.height = height = i => before[i].h;\n// \t\t\t\t}\n// \t\t\t\tfade ? (copy.opacity = i => fade[i]) : remove();\n// \t\t\t\tcopy.onComplete = () => elements.forEach((el, i) => {el._gsap.uncache = 1; el.style.cssText = after[i].css;}) || !fade || remove();\n// \t\t\t\tswapOut.forEach((el, i) => {\n// \t\t\t\t\tindex = elements.indexOf(el);\n// \t\t\t\t\tafter[index] = before[index];\n// \t\t\t\t\tbefore[index] = after[elements.indexOf(swapIn[i])];\n// \t\t\t\t\tlet v = {x: x(index), y: y(index)};\n// \t\t\t\t\tif (scale) {\n// \t\t\t\t\t\tv.scaleX = scaleX(index);\n// \t\t\t\t\t\tv.scaleY = scaleY(index);\n// \t\t\t\t\t} else {\n// \t\t\t\t\t\tv.width = width(index);\n// \t\t\t\t\t\tv.height = height(index);\n// \t\t\t\t\t}\n// \t\t\t\t\tgsap.set(el, v);\n// \t\t\t\t\tbefore[index] = after[index];\n// \t\t\t\t});\n// \t\t\t\tonInit && onInit(tl, before, after);\n// \t\t\t\treturn (elements.length ? tl.from(elements, copy, 0) : tl).play();\n// \t\t\t};\n// \t\t\tchangeResult = change(onReady);\n// \t\t\tchangeResult && changeResult instanceof gsap.core.Animation && tl.add(changeResult, 0);\n// \t\t\treturn vars.wait ? tl.pause() : onReady();\n// \t\t}\n//\n// \t\t// add flip() to timelines? Potential future feature:\n// \t\t// gsap.core.Timeline.prototype.flip = function(vars, position) {\n// \t\t// \tlet temp = gsap.to({}, {duration: vars.duration, delay: vars.delay, onStart: () => {\n// \t\t// \t\t\ttemp.parent.add(gsap.flip(vars), temp._start - temp._delay);\n// \t\t// \t\t\ttemp.kill();\n// \t\t// \t\t}\n// \t\t// \t});\n// \t\t// \treturn this.add(temp, position);\n// \t\t// };\n//\n// \t}\n// };\n\ntypeof(window) !== \"undefined\" && window.gsap && window.gsap.registerPlugin(Flip);\n\nexport { Flip as default };"],"names":["_find","context","_toArray","document","body","querySelectorAll","_copy","obj","p","result","_reserved","_makeAbsolute","elements","state","i","length","b","o","el","s","style","parentNode","appendChild","gsap","getProperty","display","d","position","width","w","height","h","top","left","getBoundingClientRect","x","l","y","t","set","_getDimensions","getProp","sx","sy","parseFloat","bw","bh","css","cssText","rx","ry","origin","getComputedStyle","transformOrigin","split","map","_populateGrowthRatios","measurements","b2","startWidth","startHeight","Math","abs","removeProperty","_getNestedOffsets","property","flipTimeline","value","lookup","_flipProps","_flip","_flipI","_getX","a","scale","offset","nested","_getY","_getScaleX","_getScaleY","_pluckTransitioning","transitioning","before","after","callback","tl","useBefore","index","recordedStates","indexOf","push","splice","add","_id","change","targets","onComplete","onUpdate","onStart","delay","swap","wait","onInit","absolute","props","onEnter","onLeave","custom","paused","Flip","fit","fromEl","toEl","vars","v","offsets","scaleX","scaleY","register","core","utils","toArray","flip","changeResult","self","this","animation","timeline","fade","copy","entering","join","measured","pause","forEach","id","getAttribute","setAttribute","progress","getFrom","target","measure","remove","swapOut","removeChild","all","leaving","swapIn","remainingProps","opacity","eventCallback","_gsap","uncache","apply","onCompleteParams","from","Animation","window","registerPlugin"],"mappings":"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"}